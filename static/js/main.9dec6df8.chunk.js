(this.webpackJsonpdictionary=this.webpackJsonpdictionary||[]).push([[0],{132:function(e,t,n){e.exports={authFull:"Style_authFull__11haa",blockAuth:"Style_blockAuth__11LZX",profile:"Style_profile__3YvBD"}},298:function(e,t,n){e.exports=n(490)},486:function(e,t,n){},488:function(e,t,n){},490:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),i=n.n(c),u=n(13),o=n(70),l=n(279),s=n(30),d=n(127),m=n(211),p=n(115),f=n(68),E=n(14),b=n.n(E),y=n(36),h=n(498),O=n(499),v=n(58),j=n(16),g=n(35),w=n(34),I={user:"\n      name\n      lastName\n      email\n      id\n      role\n  ",entity:"\n   id,\n    title,\n    irrverb {\n      form1EN,\n      form2EN,\n      form3EN,\n      ru\n    },\n    isNeededEdit,\n    isCreate,\n    words {\n      id,\n      en,\n      type,\n      disconnectTranslate {\n        id\n      }\n      translate {\n        ru,\n        id,\n        type\n      },\n    },\n    phrases {\n      id,\n      phrase,\n      ru\n    },\n    sentences {\n      id, \n      sentence,\n      ru\n    },\n    disconnectWords {\n      id\n    },\n    disconnectPhrases {\n      id\n    },\n    disconnectSentences {\n      id\n    }\n  "};function T(){var e=Object(g.a)(["\n      query getWord($entityId: Int!) {\n          entity(where: {\n              id: $entityId\n          }) {\n              id,\n              words {\n                  id,\n                  en,\n                  type,\n                  disconnectEntities {\n                      id\n                  }\n                  translate {\n                      id,\n                      ru,\n                      type,\n                      disconnectWords {\n                          id\n                      }\n                  }\n              }\n          }\n      }\n  "]);return T=function(){return e},e}function k(){var e=Object(g.a)(["\n      query PartOfSpeech {\n          partOfSpeechDescs {\n              id,\n              type,\n              ru,\n              ua,\n              en\n          }\n      }\n  "]);return k=function(){return e},e}function S(){var e=Object(g.a)(["\n      query getEntitiesByWord($word: String!) {\n          getEntitiesByWord(word: $word) @client {\n              ","\n          }\n      }\n  "]);return S=function(){return e},e}function x(){var e=Object(g.a)(["\n      query getEntities($id: Int) {\n          entities(where: {userId: {equals: $id}, isCreate: {equals: true}}) {\n              ","\n          }\n      }\n  "]);return x=function(){return e},e}function C(){var e=Object(g.a)(["\n      query countTranslate {\n          aggregateTranslate{\n              count\n          }\n      }\n  "]);return C=function(){return e},e}function W(){var e=Object(g.a)(["\n      query countWords {\n          aggregateWord{\n              count\n          }\n      }\n  "]);return W=function(){return e},e}function P(){var e=Object(g.a)(["\n      query countEntity {\n          aggregateEntity{\n              count\n          }\n      }\n  "]);return P=function(){return e},e}function A(){var e=Object(g.a)(["\n      query users {\n          users {\n              ","\n          }\n      }\n  "]);return A=function(){return e},e}function N(){var e=Object(g.a)(["\n      {\n          isAuth @client\n      }\n  "]);return N=function(){return e},e}function U(){var e=Object(g.a)(["\n      mutation {\n          refreshUser {\n              ","\n          }\n      }\n  "]);return U=function(){return e},e}function D(){var e=Object(g.a)(["\n      {\n          currentUser @client {\n              ","\n          }\n      }\n  "]);return D=function(){return e},e}function R(){var e=Object(g.a)(["\n      mutation signUp($data: UserSignUpInput!) {\n          signup(data: $data) {\n              user {\n                  ","\n              }\n              token\n          }\n      }\n  "]);return R=function(){return e},e}function $(){var e=Object(g.a)(["\n      mutation login($loginData: LoginUserInput!) {\n          login(data: $loginData) {\n              user {\n                  ","\n              }\n              token\n          }\n      }\n  "]);return $=function(){return e},e}var _,B={LOGIN:Object(w.a)($(),I.user),SIGNUP:Object(w.a)(R(),I.user),CURRENT_USER:Object(w.a)(D(),I.user),REFRESH_USER:Object(w.a)(U(),I.user),IS_AUTH:Object(w.a)(N()),USERS:Object(w.a)(A(),I.user),COUNT_ENTITY:Object(w.a)(P()),COUNT_WORDS:Object(w.a)(W()),COUNT_TRANSLATE:Object(w.a)(C()),GET_ENTITIES:Object(w.a)(x(),I.entity),GET_ENTITIES_BY_WORD_CLIENT:Object(w.a)(S(),I.entity),GET_PART_OF_SPEECH:Object(w.a)(k()),GET_WORD:Object(w.a)(T())},q={labelCol:{span:8},wrapperCol:{span:16}},H={wrapperCol:{offset:8,span:16}},F=function(){var e=Object(j.b)(B.LOGIN,{update:function(e,t){e.writeData({data:{isAuth:!0,currentUser:t.data.login.user}}),localStorage.setItem("token",t.data.login.token)}}),t=Object(u.a)(e,2),n=t[0],a=t[1],c=(a.data,a.error,function(){var e=Object(y.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({variables:{loginData:t}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement(h.a,Object.assign({},q,{name:"basic",initialValues:{remember:!0},onFinish:c}),r.a.createElement(h.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(O.a,null)),r.a.createElement(h.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(O.a.Password,null)),r.a.createElement(h.a.Item,H,r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"Submit")))},L={labelCol:{span:8},wrapperCol:{span:16}},V={wrapperCol:{offset:8,span:16}},z=function(){var e=Object(j.b)(B.SIGNUP,{update:function(e,t){e.writeData({data:{isAuth:!0,currentUser:t.data.login.user}}),localStorage.setItem("token",t.data.login.token)}}),t=Object(u.a)(e,2),n=t[0],a=(t[1].data,function(){var e=Object(y.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({variables:{data:t}});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement(h.a,Object.assign({},L,{name:"basic",initialValues:{remember:!0},onFinish:a}),r.a.createElement(h.a.Item,{label:"Username",name:"name",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(O.a,null)),r.a.createElement(h.a.Item,{label:"Last name",name:"lastName",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(O.a,null)),r.a.createElement(h.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(O.a,null)),r.a.createElement(h.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(O.a.Password,null)),r.a.createElement(h.a.Item,{label:"Repeat password",name:"repeatPassword",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(O.a.Password,null)),r.a.createElement(h.a.Item,V,r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"Submit")))},G=n(132),J=n.n(G),M=function(e){return function(t){var n=Object(j.c)(B.IS_AUTH,{fetchPolicy:"cache-only",onError:function(e){}}).data,a="/main/words";return t.location.state&&t.location.state.from&&(a=t.location.state.from),n&&n.isAuth?r.a.createElement(s.a,{to:a}):r.a.createElement(e,t)}},K=m.a.TabPane,Y=M((function(){return r.a.createElement(p.a,{justify:"center",align:"middle",className:J.a.authFull},r.a.createElement(f.a,{span:6,className:J.a.blockAuth},r.a.createElement(m.a,{defaultActiveKey:"1",animated:{inkBar:!0,tabPane:!1}},r.a.createElement(K,{tab:"Login",key:"1"},r.a.createElement(F,null)),r.a.createElement(K,{tab:"Sign up",key:"2",disabled:!0},r.a.createElement(z,null)))))})),Q=n(495),X=n(95),Z=n(512),ee=n(513),te=n(514),ne=n(515),ae=function(e){return function(t){var n=Object(j.c)(B.IS_AUTH,{fetchPolicy:"cache-only"}).data;return n&&n.isAuth?r.a.createElement(e,t):r.a.createElement(s.a,{to:{pathname:"/",state:{from:t.location.pathname}}})}};!function(e){e.ADMIN="ADMIN",e.STANDARD="STANDARD"}(_||(_={}));var re,ce=function(){var e=Object(j.c)(B.CURRENT_USER,{onError:function(e){}}).data,t=null,n=!1;return e&&e.currentUser&&(n=(t=e.currentUser).role===_.ADMIN),{user:t,isAdmin:n}},ie=n(503),ue=n(500),oe=n(496),le=function(){var e=Object(j.c)(B.GET_PART_OF_SPEECH,{fetchPolicy:"cache-first"}).data;return e?e.partOfSpeechDescs:[]},se=[{title:"Id",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Last name",dataIndex:"lastName",key:"lastName"},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",key:"role",dataIndex:"role",render:function(e){var t=e===_.ADMIN?"geekblue":"green";return r.a.createElement(ie.a,{color:t,key:e},e.toUpperCase())}}],de=function e(t,n){for(var a=0,r=Object.keys(t);a<r.length;a++){var c=r[a];if(c===n)return t[c];if("object"===typeof t[c]){var i=e(t[c],n);if(i)return i}}},me=function(){le();var e=Object(j.c)(B.USERS,{}).data,t=Object(j.c)(B.COUNT_TRANSLATE,{returnPartialData:!0}).data,n=Object(j.c)(B.COUNT_WORDS,{returnPartialData:!0}).data,a=Object(j.c)(B.COUNT_ENTITY,{returnPartialData:!0}).data,c=e?e.users:[],i=de(t,"count"),u=de(n,"count"),o=de(a,"count");return r.a.createElement(p.a,null,r.a.createElement(f.a,{span:24},r.a.createElement(ue.a,{title:"Vocabulary Info"},o&&r.a.createElement(ue.a.Item,{label:"Entity"},o),u&&r.a.createElement(ue.a.Item,{label:"Words"},u),i&&r.a.createElement(ue.a.Item,{label:"Translate"},i))),r.a.createElement(f.a,{span:24},r.a.createElement(oe.a,{columns:se,dataSource:c})))},pe=n(502);!function(e){e.ADJ="ADJ",e.ADV="ADV",e.CONJ="CONJ",e.DET="DET",e.MODAL="MODAL",e.NOUN="NOUN",e.PREP="PREP",e.PRON="PRON",e.VERB="VERB",e.OTHER="OTHER"}(re||(re={}));var fe=function(e){var t=e.type,n=Ee(t);if("object"===typeof n){var a=be(n.type);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,{color:a},n.en.toUpperCase()),r.a.createElement(ie.a,{color:a},n.ua.toUpperCase()),r.a.createElement(ie.a,{color:a},n.ru.toUpperCase()))}return r.a.createElement(ie.a,{color:be(t)},t.toUpperCase())},Ee=function(e){var t=le().find((function(t){return t.type===e}));return null===t?e:t},be=function(e){switch(e){case re.ADJ:return"magenta";case re.ADV:return"gold";case re.OTHER:return"default";case re.VERB:return"geekblue";case re.NOUN:return"green";case re.CONJ:return"lime";case re.MODAL:return"blue";case re.DET:return"default";case re.PREP:return"cyan";case re.PRON:return"purple"}return"default"},ye=oe.a.Column,he=function(e){var t=e.word;return r.a.createElement(oe.a,{dataSource:t.translate,pagination:!1,size:"small",showHeader:!1},r.a.createElement(ye,{title:"RU",dataIndex:"ru",key:"ru",width:"65%"}),r.a.createElement(ye,{width:"35%",title:"Part of speech",dataIndex:"type",key:"type",render:function(e){return r.a.createElement(fe,{type:e})}}))},Oe=oe.a.Column,ve=function(e){var t=e.words,n=e.disconnectWords,a=t.filter((function(e){return!n.some((function(t){return t.id===e.id}))})).map((function(e,t){return{key:e.id,en:e.en,type:e.type,children:e.translate}}));return r.a.createElement(oe.a,{dataSource:a,pagination:!1,size:"small",showHeader:!1},r.a.createElement(Oe,{title:"EN",dataIndex:"en",key:"en",width:"35%"}),r.a.createElement(Oe,{title:"RU",dataIndex:"ru",key:"ru",width:"35%"}),r.a.createElement(Oe,{width:"30%",title:"Part of speech",dataIndex:"type",key:"type",render:function(e){return r.a.createElement(fe,{type:e})}}))},je=n(497).a.Text,ge={width:"50%",textAlign:"center"},we=[{key:"translate",tab:"Translate",component:he},{key:"words",tab:"Words",component:ve},{key:"phrases",tab:"Phrases",component:function(e){var t=e.phrases;return r.a.createElement(p.a,null,t.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{span:12},r.a.createElement(je,{strong:!0},e.phrase),r.a.createElement("br",null),r.a.createElement(je,{type:"secondary"},e.ru)))})))}},{key:"sentences",tab:"Sentences",component:he}],Ie=function(e){var t=e.entity,n=Object(a.useState)("translate"),c=Object(u.a)(n,2),i=c[0],o=c[1],l=t.words.find((function(e){return e.en===t.title})),s=t.words.filter((function(e){return e.en!==t.title})),d=we.find((function(e){return e.key===i})).component;return r.a.createElement(pe.a.Grid,{style:ge},r.a.createElement(pe.a,{tabList:we,activeTabKey:i,onTabChange:function(e){o(e)},size:"small",title:t.title,extra:r.a.createElement(v.a,null,"Edit")},r.a.createElement(d,{word:l,disconnectWords:t.disconnectWords,words:s,phrases:t.phrases})))},Te=function(){le();var e=ce().user,t=Object(j.c)(B.GET_ENTITIES,{variables:{id:e.id}}).data,n=t?t.entities:[];return r.a.createElement(p.a,null,r.a.createElement(f.a,{span:24},r.a.createElement(pe.a,{title:"Vocabulary",size:"small"},n.map((function(e){return r.a.createElement(Ie,{key:e.id,entity:e})})))))},ke=n(501),Se=function(){return r.a.createElement(ke.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:r.a.createElement(d.b,{to:"/main/words",component:v.a,type:"primary"},"Back Home")})},xe=n(55),Ce=n(494),We=n(141),Pe=n(504),Ae=n(493),Ne=n(505),Ue=n(506),De=n(507),Re=n(508),$e=n(509),_e=We.a.Option;function Be(e){var t=e.label;return r.a.createElement(fe,{type:t})}var qe=function(e){var t=le();return r.a.createElement(We.a,Object.assign({tagRender:Be,style:{width:"100%"},bordered:!1,suffixIcon:null},e),t.map((function(e){return r.a.createElement(_e,{value:e.type,key:e.type},r.a.createElement(fe,{type:e.type}))})))};function He(){var e=Object(g.a)(["\n      mutation translateWord($word: String!, $entity: String!) {\n          translateWord(word: $word, entity: $entity) {\n              type,\n              translate {\n                  type,\n                  ru\n              }\n          }\n      }\n  "]);return He=function(){return e},e}function Fe(){var e=Object(g.a)(["\n      mutation getEntitiesByWord($word: String!) {\n          getEntitiesByWord(word: $word) {\n              ","\n          }\n      }\n  "]);return Fe=function(){return e},e}function Le(){var e=Object(g.a)(["\n      mutation updatePhraseByEntity($data: UpdatePhrasesInput!) {\n          updatePhraseByEntity(data: $data)\n      }\n  "]);return Le=function(){return e},e}function Ve(){var e=Object(g.a)(["\n      mutation upsertPhrase($phrase: String!, $ru: String!, $entityId: Int!) {\n          upsertPhrase(where: {\n              phrase: $phrase\n          }, create: {\n              phrase: $phrase,\n              ru: $ru,\n              entities: {\n                  connect: {\n                      id: $entityId\n                  }\n              }\n          }, update: {\n              entities: {\n                  connect: {\n                      id: $entityId\n                  }\n              }\n          }) {\n              id,\n              phrase,\n              ru\n          }\n      }\n  "]);return Ve=function(){return e},e}function ze(){var e=Object(g.a)(["\n      mutation translatePhrase($phrase: String!, $entity: String!) {\n          translatePhrase(phrase: $phrase, entity: $entity) {\n              phrase,\n              ru\n          }\n      }\n  "]);return ze=function(){return e},e}function Ge(){var e=Object(g.a)(["\n      mutation upsertTranslate($idWord: Int!, $ru: String!) {\n          upsertTranslate(where: {\n              ru: $ru\n          }, create: {\n              ru: $ru,\n              type: OTHER,\n              words: {\n                  connect: {\n                      id: $idWord\n                  }\n              }\n          },\n              update: {\n                  words: {\n                      connect: {\n                          id: $idWord\n                      }\n                  }\n              }) {\n              id,\n              ru,\n              type,\n          }\n      }\n  "]);return Ge=function(){return e},e}function Je(){var e=Object(g.a)(["\n      mutation updateWordsByEntity($data: TranslateWordWithParseInput!) {\n          updateWordsByEntity(data: $data)\n      }\n  "]);return Je=function(){return e},e}function Me(){var e=Object(g.a)(["\n      mutation createOrUpdateWordWithTranslate($entityId: Float!,$type: PartOfSpeech!, $en: String!, $translate: [String!]!) {\n          createOrUpdateWordWithTranslate(entityId: $entityId, type: $type, en: $en, translate: $translate) {\n              id,\n              en,\n              type,\n              disconnectTranslate {\n                  id\n              },\n              translate {\n                  id,\n                  ru,\n                  type\n              }\n          }\n      }\n  "]);return Me=function(){return e},e}function Ke(){var e=Object(g.a)(["\n      mutation deleteTranslate($idTransalte: Int!, $idWord: Int!) {\n          updateWord(data: {\n              disconnectTranslate: {\n                  connect: {\n                      id: $idTransalte\n                  }\n              }\n          }, where: {\n              id: $idWord\n          }) {\n              id,\n              disconnectTranslate {\n                  id\n              }\n          }\n      }\n  "]);return Ke=function(){return e},e}function Ye(){var e=Object(g.a)(["\n      mutation deleteWord($idEntity: Int!, $idWord: Int!) {\n          updateWord(data: {\n              disconnectEntities: {\n                  connect: {\n                      id: $idEntity\n                  }\n              }\n          }, where: {id: $idWord}) {\n              id\n          }\n      }\n  "]);return Ye=function(){return e},e}var Qe={deleteWord:Object(w.a)(Ye()),deleteTranslate:Object(w.a)(Ke()),createOrUpdateWordWithTranslate:Object(w.a)(Me()),updateWordsByEntity:Object(w.a)(Je()),upsertTranslate:Object(w.a)(Ge()),translatePhrase:Object(w.a)(ze()),upsertPhrase:Object(w.a)(Ve()),updatePhraseByEntity:Object(w.a)(Le()),GET_ENTITIES_BY_WORD:Object(w.a)(Fe(),I.entity),TRANSLATE_WORD:Object(w.a)(He())},Xe=O.a.Search,Ze=We.a.Option,et=(v.a.Group,function(e){var t=e.onClose,n=e.onAdd,c=e.entity,i=Object(a.useState)([]),o=Object(u.a)(i,2),l=o[0],s=o[1],d=Object(j.b)(Qe.TRANSLATE_WORD),m=Object(u.a)(d,1)[0],p=h.a.useForm(),f=Object(u.a)(p,1)[0],E=function(){var e=Object(y.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(a),t();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){f.setFieldsValue({type:e})},w=function(){var e=Object(y.a)(b.a.mark((function e(t,n){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,m({variables:{word:t,entity:c}});case 5:if(null!==(a=e.sent).data){e.next=8;break}return e.abrupt("return");case 8:r=a.data.translateWord,s(r.translate.map((function(e){return e.ru}))),f.setFieldsValue({translate:r.translate.map((function(e){return e.ru}))}),g(r.type);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(h.a,{name:"basic",onFinish:E,form:f},r.a.createElement(h.a.Item,{name:"en",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(Xe,{onSearch:w,placeholder:"Word",enterButton:!0})),r.a.createElement(h.a.Item,{name:"translate",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(We.a,{mode:"tags",tokenSeparators:[","]},l.map((function(e){return r.a.createElement(Ze,{value:e},e)})))),r.a.createElement(O.a.Group,{compact:!0,size:"small"},r.a.createElement(h.a.Item,{name:"type",rules:[{required:!0,message:"Please input your username!"}],initialValue:re.OTHER},r.a.createElement(qe,{onChange:g})),r.a.createElement(h.a.Item,null,r.a.createElement(v.a,{size:"large",type:"primary",htmlType:"submit",shape:"circle",icon:r.a.createElement(Ne.a,null)}))))}),tt=function(e){var t=e.onAdd,n=e.onUpdate,c=e.loadingUpdate,i=e.disabled,o=e.isShowDeleted,l=e.checkedDeleted,s=e.onPrev,d=e.onNext,m=e.disabledNext,f=e.disabledPrev,E=e.entity,b=e.isCreate,y=Object(a.useState)(!1),h=Object(u.a)(y,2),O=h[0],j=h[1];return r.a.createElement(p.a,{justify:"space-between"},r.a.createElement("div",null,r.a.createElement(v.a,{size:"small",shape:"circle",type:"primary",onClick:s,disabled:f,icon:r.a.createElement(Ue.a,null)}),r.a.createElement(v.a,{size:"small",shape:"circle",type:"primary",onClick:d,disabled:m,icon:r.a.createElement(De.a,null)}),r.a.createElement(Pe.a,{checkedChildren:r.a.createElement(Re.a,null),unCheckedChildren:r.a.createElement($e.a,null),checked:o,onChange:function(e){return l(e)}}),"Show deleted"),r.a.createElement(v.a.Group,null,r.a.createElement(v.a,{onClick:n,type:"primary",disabled:i||c,loading:c},b?"Update":"Create"),r.a.createElement(Ae.a,{content:r.a.createElement(et,{onClose:function(){j(!1)},onAdd:t,entity:E}),trigger:"click",visible:O,onVisibleChange:function(e){j(e)},placement:"rightBottom"},r.a.createElement(v.a,{onClick:function(){return j(!0)}},"Add word"))))},nt=function(e){return 0===Object.keys(e).length},at=O.a.Search,rt=function(e){var t=e.onClose,n=e.idWord,a=e.onAdd,c=Object(j.b)(Qe.upsertTranslate),i=Object(u.a)(c,2),o=i[0],l=i[1].loading,s=function(){var e=Object(y.a)(b.a.mark((function e(r){var c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,o({variables:{idWord:n,ru:r}});case 4:c=e.sent,i=c.data.upsertTranslate,a(n,i),t();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(at,{placeholder:"input search text",onSearch:s,allowClear:!0,enterButton:!0,loading:l})},ct=function(e){var t=e.idWord,n=e.onAdd,c=Object(a.useState)(!1),i=Object(u.a)(c,2),o=i[0],l=i[1];return r.a.createElement(Ae.a,{content:r.a.createElement(rt,{onClose:function(){l(!1)},idWord:t,onAdd:n}),trigger:"click",visible:o,onVisibleChange:function(e){l(e)},placement:"rightBottom"},r.a.createElement(v.a,{size:"middle",shape:"circle",onClick:function(){return l(!0)},icon:r.a.createElement(Ne.a,null)}))},it=n(155),ut=n(212),ot=function(e,t){var n=e;return Object.keys(t).forEach((function(e){t[e]&&(n=n+" "+e)})),n},lt=(n(486),r.a.createContext(null)),st=function(e){e.index;var t=Object(ut.a)(e,["index"]),n=h.a.useForm(),a=Object(u.a)(n,1)[0];return r.a.createElement(h.a,{form:a,component:!1},r.a.createElement(lt.Provider,{value:a},r.a.createElement("tr",t)))},dt=function(e){var t=e.title,n=e.editable,c=e.children,i=e.dataIndex,l=e.record,s=e.handleSave,d=Object(ut.a)(e,["title","editable","children","dataIndex","record","handleSave"]),m=Object(a.useState)(!1),p=Object(u.a)(m,2),f=p[0],E=p[1],v=Object(a.useRef)(),j=Object(a.useContext)(lt);Object(a.useEffect)((function(){f&&v.current.focus()}),[f]);var g=function(){E(!f),j.setFieldsValue(Object(it.a)({},i,l[i]))},w=function(){var e=Object(y.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.validateFields();case 3:n=e.sent,g(),s(Object(o.a)({},l,{},n,{dataIndex:i})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),I=c;return n&&(I=f?r.a.createElement(h.a.Item,{style:{margin:0},name:i,rules:[{required:!0,message:"".concat(t," is required.")}]},r.a.createElement(O.a,{ref:v,onPressEnter:w,onBlur:w})):r.a.createElement("div",{className:ot("editable-cell-value-wrap",{"cell-ru":"ru"===i}),onClick:g},c)),"en"===i&&void 0===l.children||"ru"===i&&l.children?null:r.a.createElement("td",d,I)},mt=n(510),pt=n(511),ft=n(273),Et=function e(){var t=this;Object(ft.a)(this,e),this.history=null,this.current=null,this.handlers=[],this.addHandler=function(e){t.handlers.push(e)},this.getRevertAction=function(e){var n=t.handlers.find((function(t){return Object.keys(t).some((function(t){return t===e}))}));return n[Object.keys(n).filter((function(t){return t!==e}))[0]]},this.getAction=function(e){return t.handlers.find((function(t){return Object.keys(t).some((function(t){return t===e}))}))[e]},this.addAction=function(e){t.history=t.current;var n=Object(o.a)({nextAction:null,prevAction:t.history},e);t.history.nextAction=n,t.history=n,t.current=t.history},this.prev=function(){null!==t.current&&null!==t.current.prevAction&&(t.getRevertAction(t.current.action)(t.current.payload),t.current=t.current.prevAction)},this.next=function(){null!==t.current&&null!==t.current.nextAction&&(t.current=t.current.nextAction,t.getAction(t.current.action)(t.current.payload))},this.isPrev=function(){return null!==t.current&&null!==t.current.prevAction},this.isNext=function(){return null!==t.current&&null!==t.current.nextAction},this.current=this.history={prevAction:null,payload:"",action:"",nextAction:null}},bt=oe.a.Column,yt=function(e){var t=Object(j.b)(Qe.createOrUpdateWordWithTranslate),n=Object(u.a)(t,1)[0],c=Object(j.b)(Qe.updateWordsByEntity),i=Object(u.a)(c,2),l=i[0],s=i[1].loading,d=Object(a.useRef)({}),m=Object(a.useRef)(new Et),f=Object(a.useState)(e.isCreate),E=Object(u.a)(f,2),h=E[0],O=E[1],g=Object(a.useState)(!1),w=Object(u.a)(g,2),I=w[0],T=w[1],k=Object(a.useState)(e.words),S=Object(u.a)(k,2),x=S[0],C=S[1],W=Object(a.useState)(e.disconnectWords),P=Object(u.a)(W,2),A=P[0],N=P[1],U=function(e,t,n){return e.filter((function(e){return!(n?[]:t).some((function(t){return t.id===e.id}))})).map((function(e,a){var r=n?e.translate:e.translate.filter((function(t){return!e.disconnectTranslate.some((function(e){return e.id===t.id}))})),c=e.translate.filter((function(t){return!e.disconnectTranslate.some((function(e){return e.id===t.id}))})).length;return{key:e.id||a,en:e.en,type:e.type,isDelete:!!n&&t.some((function(t){return t.id===e.id})),children:r.map((function(t,a){return{key:t.id||a,ru:t.ru,type:t.type,count:c,idWord:e.id,isDelete:!!n&&e.disconnectTranslate.some((function(e){return e.id===t.id}))}}))}}))}(x,A,I),D={body:{row:st,cell:dt}};Object(a.useEffect)((function(){m.current.addHandler({addDeleteWord:function(e){N((function(t){return[].concat(Object(xe.a)(t),[{id:e}])}))},removeDeleteWord:function(e){N((function(t){return t.filter((function(t){return t.id!==e}))}))}}),m.current.addHandler({addDeleteTranslate:function(e){$(e)},removeDeleteTranslate:function(e){F(e)}})}),[]);var R=function(){var e=Object(y.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.children?(m.current.addAction({action:"addDeleteWord",payload:t.key}),N((function(e){return[].concat(Object(xe.a)(e),[{id:t.key}])}))):(m.current.addAction({action:"addDeleteTranslate",payload:{idTranslate:t.key,idWord:t.idWord}}),$({idTranslate:t.key,idWord:t.idWord}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){var t=e.idTranslate,n=e.idWord;C((function(e){var a=e.find((function(e){return e.id===n}));return a.disconnectTranslate=[].concat(Object(xe.a)(a.disconnectTranslate),[{id:t}]),d.current[n]=a,Object(xe.a)(e)}))},_=function(e){C((function(t){var n=t.findIndex((function(t){return t.id===(e.idWord||e.key)}));if("en"===e.dataIndex)t[n].en=e.en;else{var a=t[n].translate.findIndex((function(t){return t.id===e.key}));t[n].translate[a].ru=e.ru}return d.current[e.idWord||e.key]=t[n],Object(xe.a)(t)}))},B=function(){var t=Object(y.a)(b.a.mark((function t(a){var r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({variables:{entityId:e.entityId,type:a.type,en:a.en,translate:a.translate}});case 2:r=t.sent,c=r.data.createOrUpdateWordWithTranslate,m.current.addAction({payload:c.id,action:"removeDeleteWord"}),C((function(e){return[].concat(Object(xe.a)(e),[c])}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(e,t){var n=x.findIndex((function(t){return t.id===e}));-1===x[n].translate.findIndex((function(e){return e.id===t.id}))&&(x[n].translate.push(t),C(Object(xe.a)(x)))},H=function(){l({variables:{data:{entityId:e.entityId,words:Object.values(d.current).map((function(e){return{type:e.type,id:e.id,disconnectTranslate:e.disconnectTranslate.map((function(e){return e.id})),translate:e.translate.map((function(e){return{id:e.id,type:e.type,ru:e.ru}}))}})),disconnectWords:A.map((function(e){return e.id}))}}}).then((function(e){d.current={},O(!0)}))},F=function(e){var t=e.idWord,n=e.idTranslate;C((function(e){var a=e.findIndex((function(e){return e.id===t}));return e[a].disconnectTranslate=e[a].disconnectTranslate.filter((function(e){return e.id!==n})),Object(xe.a)(e)}))};return r.a.createElement(oe.a,{bordered:!1,showHeader:!1,components:D,dataSource:U,pagination:!1,size:"small",rowClassName:function(){return"editable-row"},title:function(){return r.a.createElement(tt,{onAdd:B,onUpdate:H,loadingUpdate:s,disabled:!!h&&nt(d.current),isShowDeleted:I,checkedDeleted:T,disabledPrev:!m.current.isPrev(),disabledNext:!m.current.isNext(),onPrev:m.current.prev,onNext:m.current.next,entity:e.title,isCreate:h})}},r.a.createElement(bt,{title:"EN",dataIndex:"en",key:"en",width:"40%",onCell:function(e){return{record:e,dataIndex:"en",title:"EN",handleSave:_}}}),r.a.createElement(bt,{title:"RU",dataIndex:"ru",key:"ru",width:"45%",onCell:function(e){return{record:e,editable:!0,dataIndex:"ru",title:"RU",handleSave:_}}}),r.a.createElement(bt,{title:"Part of speech",dataIndex:"type",key:"type",width:"15%",render:function(e,t){return r.a.createElement(qe,{value:e,onChange:function(e){return function(e,t,n){C((function(a){var r=a.findIndex((function(e){return e.id===(n||t)}));if(n){var c=a[r].translate.findIndex((function(e){return e.id===t}));a[r].translate[c].type=e}else a[r].type=e;return d.current[n||t]=a[r],Object(xe.a)(a)}))}(e,t.key,t.idWord)}})}}),r.a.createElement(bt,{title:"Operation",dataIndex:"operation",render:function(e,t){var n=!t.idWord,a=n?t.key:t.idWord,c=n?void 0:t.key;return t.isDelete?r.a.createElement(Ce.a,{title:"Sure to return?",onConfirm:function(){return function(e){var t=e.idTranslate,n=e.idWord;t?(m.current.addAction({action:"removeDeleteTranslate",payload:{idTranslate:t,idWord:n}}),F({idTranslate:t,idWord:n})):(m.current.addAction({action:"removeDeleteWord",payload:n}),N((function(e){return e.filter((function(e){return e.id!==n}))})))}({idWord:a,idTranslate:c})}},r.a.createElement(v.a,{size:"small",shape:"circle-outline",icon:r.a.createElement(mt.a,null)})):t.count&&1===t.count?null:r.a.createElement(p.a,{align:"middle"},n&&r.a.createElement(ct,{idWord:t.key,onAdd:q}),r.a.createElement(Ce.a,{title:"Sure to delete?",onConfirm:function(){return R(Object(o.a)({},t))}},r.a.createElement(v.a,{danger:!0,size:"small",shape:"circle",icon:r.a.createElement(pt.a,null)})))}}))},ht=O.a.Search,Ot=function(e){var t=e.onClose,n=e.onAdd,a=e.entity,c=Object(j.b)(Qe.translatePhrase),i=Object(u.a)(c,2),o=i[0],l=i[1].loading,s=h.a.useForm(),d=Object(u.a)(s,1)[0],m=function(){var e=Object(y.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(a),t();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(y.a)(b.a.mark((function e(t,n){var r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,o({variables:{phrase:t,entity:a}});case 3:if(null!==(r=e.sent).data){e.next=6;break}return e.abrupt("return");case 6:c=r.data.translatePhrase,d.setFieldsValue({ru:c.ru});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(h.a,{name:"basic",onFinish:m,form:d},r.a.createElement(h.a.Item,{name:"phrase",rules:[{required:!0,message:"Please input your phrase!"}]},r.a.createElement(ht,{onSearch:p,placeholder:"Phrase",enterButton:!0,loading:l})),r.a.createElement(O.a.Group,{compact:!0,size:"default"},r.a.createElement(h.a.Item,{name:"ru",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(O.a,null)),r.a.createElement(h.a.Item,null,r.a.createElement(v.a,{type:"primary",htmlType:"submit",icon:r.a.createElement(Ne.a,null)}))))},vt=function(e){var t=e.disabled,n=e.onUpdate,c=e.onAdd,i=e.loadingUpdate,o=e.entity,l=e.isCreate,s=Object(a.useState)(!1),d=Object(u.a)(s,2),m=d[0],f=d[1];return r.a.createElement(p.a,{justify:"end"},r.a.createElement(v.a.Group,null,r.a.createElement(v.a,{onClick:n,type:"primary",disabled:t||i,loading:i},l?"Update":"Create"),r.a.createElement(Ae.a,{content:r.a.createElement(Ot,{onClose:function(){f(!1)},onAdd:c,entity:o}),trigger:"click",visible:m,onVisibleChange:function(e){f(e)},placement:"rightBottom"},r.a.createElement(v.a,{onClick:function(){return f(!0)}},"Add phrase"))))},jt=oe.a.Column,gt=function(e){var t=Object(j.b)(Qe.upsertPhrase),n=Object(u.a)(t,1)[0],c=Object(j.b)(Qe.updatePhraseByEntity),i=Object(u.a)(c,2),l=i[0],s=i[1].loading,d=Object(a.useState)(e.phrases),m=Object(u.a)(d,2),p=m[0],f=m[1],E=Object(a.useState)(e.disconnectPhrases),h=Object(u.a)(E,2),O=h[0],g=h[1],w=Object(a.useState)(e.isCreate),I=Object(u.a)(w,2),T=I[0],k=I[1],S=Object(a.useRef)({}),x={body:{row:st,cell:dt}},C=function(){var e=Object(y.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.current[t.id]=t,n=p.findIndex((function(e){return e.id===t.id})),p[n]=t,f((function(e){return Object(xe.a)(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){l({variables:{data:{entityId:e.entityId,disconnectPhrases:O.map((function(e){return e.id})),phrases:Object.values(S.current).map((function(e){return{id:e.id,ru:e.ru,phrase:e.phrase}}))}}}).then((function(){S.current={},k(!0)}))},P=function(){var t=Object(y.a)(b.a.mark((function t(a){var r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({variables:{phrase:a.phrase,ru:a.ru,entityId:e.entityId}});case 2:r=t.sent,c=r.data.upsertPhrase,f((function(e){return[].concat(Object(xe.a)(e),[c])}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=p.filter((function(e){return!O.some((function(t){return t.id===e.id}))}));return r.a.createElement(oe.a,{bordered:!1,showHeader:!1,components:x,dataSource:A,pagination:!1,size:"small",rowClassName:function(){return"editable-row"},title:function(){return r.a.createElement(vt,{onAdd:P,onUpdate:W,loadingUpdate:s,disabled:!!T&&nt(S.current),entity:e.title,isCreate:T})}},r.a.createElement(jt,{title:"Phrase",dataIndex:"phrase",key:"phrase",width:"40%",onCell:function(e){return{record:e,editable:!0,dataIndex:"phrase",title:"Phrase",handleSave:C}}}),r.a.createElement(jt,{title:"RU",dataIndex:"ru",key:"ru",width:"45%",onCell:function(e){return{record:e,editable:!0,dataIndex:"ru",title:"RU",handleSave:C}}}),r.a.createElement(jt,{title:"Operation",dataIndex:"operation",render:function(e,t){return r.a.createElement(Ce.a,{title:"Sure to delete?",onConfirm:function(){return e=Object(o.a)({},t),void g((function(t){return[].concat(Object(xe.a)(t),[{id:e.id}])}));var e}},r.a.createElement(v.a,{danger:!0,size:"small",shape:"circle",icon:r.a.createElement(pt.a,null)}))}}))},wt=function(e){var t=e.entity;return r.a.createElement(p.a,{justify:"center"},r.a.createElement(f.a,{span:24},r.a.createElement(yt,{words:t.words,disconnectWords:t.disconnectWords,entityId:t.id,title:t.title,isCreate:t.isCreate})),r.a.createElement(f.a,{span:24},r.a.createElement(gt,{phrases:t.phrases,disconnectPhrases:t.disconnectPhrases,entityId:t.id,title:t.title,isCreate:t.isCreate})))},It=O.a.Search,Tt=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(j.b)(Qe.GET_ENTITIES_BY_WORD),o=Object(u.a)(i,1)[0],l=function(){var e=Object(y.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({variables:{word:t}});case 2:(n=e.sent).data&&c(n.data.getEntitiesByWord);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(p.a,null,r.a.createElement(f.a,{span:24},r.a.createElement(pe.a,{size:"small"},r.a.createElement(It,{placeholder:"Input text for create entity of word",enterButton:"Search",size:"large",onSearch:l}))),n.map((function(e,t){return r.a.createElement(f.a,{flex:"1",key:e.id||t},r.a.createElement(wt,{entity:e}))})))},kt=Q.a.Content,St=Q.a.Sider,xt=ae((function(e){var t=e.match.params.item||"words",n=Object(j.a)(),c=Object(s.g)(),i=ce(),o=i.isAdmin,l=i.user,d=Object(a.useState)(!1),m=Object(u.a)(d,2),p=m[0],f=m[1],E=function(){var e=Object(y.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cache.reset();case 2:localStorage.removeItem("token"),c.replace("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Q.a,{style:{minHeight:"100vh"}},r.a.createElement(St,{collapsible:!0,collapsed:p,onCollapse:function(e){f(e)}},r.a.createElement("div",{className:J.a.profile},l&&l.name),r.a.createElement(X.a,{theme:"dark",defaultSelectedKeys:[t],mode:"inline"},r.a.createElement(X.a.Item,{key:"create",icon:r.a.createElement(Z.a,null),onClick:function(){return e.history.push("/main/create")}},"Create"),r.a.createElement(X.a.Item,{key:"words",icon:r.a.createElement(ee.a,null),onClick:function(){return e.history.push("/main/words")}},"Words"),o&&r.a.createElement(X.a.Item,{key:"users",icon:r.a.createElement(te.a,null),onClick:function(){return e.history.push("/main/users")}},"Users"),r.a.createElement(X.a.Item,{key:"exit",icon:r.a.createElement(ne.a,null),onClick:E},"Exit"))),r.a.createElement(Q.a,{className:"site-layout"},r.a.createElement(kt,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/main/users",component:me}),r.a.createElement(s.b,{path:"/main/words",component:Te}),r.a.createElement(s.b,{path:"/main/create",component:Tt}),r.a.createElement(s.b,{component:Se})))))})),Ct=n(50),Wt=n(88),Pt=(n(487),n(488),n(153)),At=n(241),Nt=n(103),Ut=n(275),Dt=n(75);console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/dictionary",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}));var Rt=Object(Ut.a)((function(e){var t=e.graphQLErrors,n=void 0===t?[]:t,a=e.networkError,r=e.operation,c=e.forward,i=e.response;console.log({graphQLErrors:n,networkError:a,operation:r,forward:c,response:i}),console.log("production"),n.map((function(e){l.a.error({message:e.message})}))})),$t=new Pt.a((function(e,t){return e.setContext((function(e){var t=e.headers;return{headers:Object(o.a)({authorization:"Bearer ".concat(localStorage.getItem("token"))},t)}})),t(e)})),_t=new Nt.a({uri:"https://englishnew.herokuapp.com/graphql"}),Bt=new Wt.a,qt=new Dt.a({cache:Bt,link:Object(At.a)([$t,Rt,_t]),connectToDevTools:!0,defaultOptions:{mutate:{errorPolicy:"ignore"},query:{errorPolicy:"ignore"}}});Bt.writeData({data:{isAuth:!1,currentUser:null}});var Ht=function(){var e=function(){var e=Object(j.b)(B.REFRESH_USER,{update:function(e,t){e.writeData({data:{isAuth:!0,currentUser:t.data.refreshUser}})}}),t=Object(u.a)(e,1)[0];return Object(a.useEffect)((function(){t()}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:Y}),r.a.createElement(s.b,{path:"/main/:item?",component:xt})))};return r.a.createElement(Ct.a,{client:qt},r.a.createElement(d.a,{basename:"/dictionary"},r.a.createElement(e,null)))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ht,null)),document.getElementById("root"))}},[[298,1,2]]]);
//# sourceMappingURL=main.9dec6df8.chunk.js.map